---
title: 常量变量和表达式
date: 2024-12-06 17:52:02
tags: C
description：自用快速复习c语言
categories: C语言
cover: https://i.pinimg.com/736x/b1/fd/9f/b1fd9f687f45ab084a56cf40882b0dbd.jpg
---

# 常量变量和表达式

给出如下代码

```c
#include <stdio.h>
/* 
 *comment1
 * main: generate some simple output 
 */

int main(void){
printf(/* comment2 */"Hello, world.\n"); /* comment3 */
 return 0;
}
```

C语言注释注意事项：

- **多行注释**：`/* */`不能嵌套，否则会导致解析错误。
- **单行注释**：`//`从标记开始至行尾，不可跨行，仅C99及以上标准支持，使用需注意兼容性。

#### 一. C语言字符串与转义序列总结

1. **字符串字面值**：
   - 用双引号 `"` 包裹，表示一串字符。
   - 双引号是界定符，不属于字符串内容。
   - 转义序列如 `\n` 表示特殊含义，而非字符本身。
2. **转义序列的作用**：
   - **普通字符 → 特殊字符**：如 `\n` 表示换行，`\t` 表示制表符。
   - **特殊字符 → 普通字符**：如 `\\` 表示反斜线，`\"` 表示双引号。
3. **常用转义字符**：
   - `\n`：换行
   - `\t`：制表符
   - `\r`：回车
   - `\\`：反斜线
   - `\"`：双引号
4. **注意事项**：
   - Windows文本行分隔符用 `\r\n`，Linux/UNIX用 `\n`。
   - 转义字符作用于特殊终端操作，例如 `\a` 响铃，`\b` 退格。
   - `\v` 水平制表符少用，` \t` 更常见。

以下是常用转义字符及其效果的说明：

| **转义字符** | **描述**                | **效果示例**                       |
| ------------ | ----------------------- | ---------------------------------- |
| `\\`         | 反斜线                  | 输出 `\`                           |
| `\"`         | 双引号                  | 输出 `"`                           |
| `\'`         | 单引号                  | 输出 `'`                           |
| `\n`         | 换行符                  | 换到下一行                         |
| `\r`         | 回车符                  | 光标回到当前行开头（覆盖后续字符） |
| `\t`         | 水平制表符（Tab键效果） | 跳到下一个水平制表位（对齐效果）   |
| `\v`         | 垂直制表符              | 跳到下一行的表格位（较少用）       |
| `\b`         | 退格符                  | 删除光标前的一个字符               |
| `\f`         | 分页符                  | 控制打印机换页（在终端中无效果）   |
| `\a`         | 响铃（报警音）          | 在支持的终端上发出提示音           |
| `\?`         | 问号                    | 输出 `?`                           |

示例代码

```c
#include <stdio.h>
int main() {
    printf("Hello,\\ World!\n");   // 输出：Hello,\ World! 并换行  
    printf("\"Quoted Text\"\n");  // 输出："Quoted Text" 并换行  
    printf("Column1\tColumn2\n"); // 输出两列文字对齐  
    printf("Backspace\bX\n");     // 输出：BackspacX（退格覆盖e）  
    printf("Beep!\a\n");          // 终端响铃（视终端支持而定）  
    return 0;
}
```

运行效果

```
Hello,\ World!
"Quoted Text"
Column1    Column2
BackspacX
Beep!      （发出提示音）
```

--------

----

#### 二. 常量

1. **字符常量**：

   - 用单引号 `'` 包裹，表示单个字符（如 `'a'`）。
   - 可以是转义序列（如 `'\n'`），表示单个特殊字符。
   - `'` 和 `\` 必须使用转义序列 `\'` 和 `\\` 表示。

2. **数字常量**：

   - 包括 **整数** 和 **浮点数**，如 `34` 和 `3.14`。
   - 整数与浮点数在内部存储方式不同，需严格区分。

3. **格式化字符串**：

   - 用于 `printf` 等函数，定义数据的输出格式。

   - 占位符

     （`%`+ 字母）表示插入数据的格式：

     - `%c`：字符型
     - `%d`：整型
     - `%f`：浮点型

   - 占位符由函数解释，不属于字符串的字面内容。

4. **区分不同类型常量**：

   - `"5"` 是字符串字面值。
   - `'5'` 是字符常量。
   - `5` 是整数常量。

---------

--------

#### 三.变量

1. **定义**：
   变量是计算机存储器中的一块命名空间，用于存储可变的值。
2. **类型与存储空间**：
   变量类型决定所占存储空间大小，常见类型包括：
   - `char`：字符型
   - `int`：整型
   - `float`：单精度浮点型
   - `double`：双精度浮点型
3. **命名规则**：
   - 必须以字母或下划线 `_` 开头，后续可包含字母、数字、下划线。
   - 不允许包含其他字符（如 `$`）。
   - 避免以下划线开头的命名，以防与编译器或库定义冲突。
4. **关键字**：
   - 关键字（如 `int`、`while`）是保留字，不能作为变量名。
   - 程序员定义的标识符需避免与关键字冲突。
5. **命名建议**：
   - 使用有意义的名字，描述变量用途，如 `hour` 表示小时、`minute` 表示分钟。
   - 同类型变量可在一行定义（如 `int hour, minute;`）。
6. **变量定义与声明**：
   - 定义：为变量分配存储空间。
   - 声明：仅描述变量的类型和名字，可能不分配存储空间。

**注意事项**

- 理解变量的概念不仅需知定义，还需了解其使用规则、限制与最佳实践。
- 避免潜在冲突和错误，遵循变量命名规范和类型规则，是编程中的好习惯。

-----------

-----------

#### 四.赋值

1. **定义与赋值**：

   - 定义一个变量：分配存储空间并命名。
   - 赋值：将值存储到变量的存储空间中。
   - 变量必须先定义后使用，赋值语句右边的值必须与变量类型匹配。

   示例代码：

   ```c
   char firstletter;  // 定义变量
   int hour, minute;  // 定义多个变量
   firstletter = 'a'; // 赋值
   hour = 11;         // 赋值
   minute = 59;       // 赋值
   ```

2. **初始化**：

   - 定义变量时直接赋初始值，称为初始化。
   - 初始化是特殊的定义语句，而不是赋值语句。

   示例代码：

   ```c
   char firstletter = 'a';  // 初始化
   int hour = 11, minute = 59; // 一次定义并初始化多个变量
   ```

3. **变量值的使用**：

   - 变量名在赋值语句左侧表示存储值。
   - 在其他语句中表示取出变量的值使用。

   示例代码：

   ```c
   printf("Current time is %d:%d", hour, minute); 
   // 使用变量 hour 和 minute 的值
   ```

4. **类型匹配**：

   - 赋值时，值的类型必须与变量类型一致。
   - 类型不匹配会导致编译器报警或报错。

   错误示例：

   ```c
   int hour, minute;
   hour = "Hello.";  // 错误：字符串不能赋值给整型变量
   minute = "59";    // 错误：字符串不能赋值给整型变量
   ```

5. **存储空间与类型**：

   - 不同类型的变量占用的存储空间大小不同。
   - 最小存储单位为字节 (`Byte`)，`char` 类型变量占 1 字节，其他类型在不同平台大小可能不同。

6. **变量的表示（图示）**：
   在纸上模拟程序时，用框表示变量存储空间，框外标注变量名，框内存储值。例如：

   ```
   +------------+
   |   'a'      |  <- firstletter
   +------------+
   
   +------------+
   |   11       |  <- hour
   +------------+
   
   +------------+
   |   59       |  <- minute
   +------------+
   ```

**示例代码**

以下是完整示例代码展示定义、赋值和变量值的使用：

```c
#include <stdio.h>

int main() {
    char firstletter = 'a';          // 定义并初始化
    int hour = 11, minute = 59;      // 定义多个变量并初始化
    
    printf("Current time is %d:%d\n", hour, minute); 
    // 输出当前时间

    return 0;
}
```

--------

---------

#### 五.表达式

1. **表达式的基本概念**：

   - 表达式由 **运算符** 和 **操作数** 组成，例如：`1 + 1`, `hour * 60 + minute`。
   - 操作数可以是常量或变量。
   - 运算符有优先级和结合性：
     - `*` 和 `/` 优先级高于 `+` 和 `-`。
     - 运算顺序默认从左到右（左结合），但等号运算符是右结合的。

   示例：

   ```c
   int total = total_minute = hour * 60 + minute;
   ```

   - 计算顺序：
     1. 计算 `hour * 60 + minute`。
     2. 将结果赋给 `total_minute`。
     3. 再赋给 `total`。

2. **表达式语句**：

   - 表达式后加分号 `;` 成为表达式语句。
   - 表达式语句只有在赋值或输出中才有意义，否则没有效果。

   示例：

   ```c
   total_minute = hour * 60 + minute;  // 有意义，保存结果
   hour * 60 + minute;                // 无意义，未保存结果
   ```

3. **等号运算符特性**：

   - 左侧必须是变量或能表示存储位置的左值（`lvalue`）。
   - 右侧可以是任何表达式（右值 `rvalue`）。

   错误示例：

   ```c
   minute + 1 = hour; // 错误，等号左侧不能是表达式
   ```

4. **整数除法**：

   - 两个整数相除结果仍是整数，小数部分直接***截断***。

   - 示例：

     ```c
     printf("%d and %d hours\n", hour, minute / 60);  // 输出 11 and 0 hours
     ```

5. **浮点数运算与类型转换**：

   - 如果操作数类型不一致，C 编译器会自动进行隐式类型转换。

   - 示例：

     ```c
     printf("%d and %f hours\n", hour, minute / 60.0); 
     // minute 被转换为浮点数，结果为浮点数
     ```

6. **表达式的组合**：

   - 表达式可以嵌套和组合，但过度复杂会降低可读性。

   - 简洁示例：

     ```c
     printf("%d:%d is %d minutes after 00:00\n", hour, minute, hour * 60 + minute);
     ```

   - 复杂组合示例（不推荐过度使用）：

     ```c
     printf("%d:%d is %d minutes after 00:00\n", hour, minute, total_minute = hour * 60 + minute);
     ```

**示例代码**

以下代码展示了表达式的基本应用：

```c
#include <stdio.h>

int main() {
    int hour = 11, minute = 59; // 定义并初始化
    int total_minute;          // 定义变量
    
    // 赋值与打印
    total_minute = hour * 60 + minute; 
    printf("%d:%d is %d minutes after 00:00\n", hour, minute, total_minute);

    // 整数除法
    printf("%d and %d hours\n", hour, minute / 60);

    // 百分比计算
    printf("%d hours and %d percent of an hour\n", hour, minute * 100 / 60);

    // 浮点数运算
    printf("%d and %f hours\n", hour, minute / 60.0);

    return 0;
}
```

运行结果：

```
11:59 is 719 minutes after 00:00
11 and 0 hours
11 hours and 98 percent of an hour
11 and 0.983333 hours
```

----------------

----------------

#### 六.字符类型与字符编码

1. **字符编码的概念**：

   - ASCII码

     是一种字符编码方式，将字符映射到整数值。

     - ASCII码的取值范围为 **0~127**。
     - 可分为可见字符（如 `'a'`, `'1'`）和不可见字符（如 `\n`, `\t`）。
     - 示例：`'a'` 的 ASCII 码值是 97，`'b'` 的值是 98。

2. **字符型参与运算**：

   - 在 C 语言中，`char` 本质是整型的一种，占用 1 个字节。
   - 当字符型参与算术运算时，会根据 **隐式类型转换规则** 转为整型（ASCII值）进行计算。

   示例：

   ```c
   printf("%c\n", 'a' + 1);  // 输出: b
   ```

   - 计算过程：
     1. `'a'` 转为 ASCII 值 `97`。
     2. 加 `1` 得 `98`。
     3. `%c` 格式化为字符，打印 ASCII 值 `98` 对应的字符 `'b'`。

3. **字符的连续性**：

   - `'a'`  ~`'z'`,`'A'` ~`'Z'` , `'0'`~`'9'` 的 ASCII 码是连续的
     - `'a'` 的 ASCII 码为 97，`'b'` 为 98，`'z'` 为 122。
     - `'0'` 的 ASCII 码为 48，`'9'` 为 57。

   示例：

   ```c
   printf("%d\n", '0' + 9 == '9');  // 输出: 1 (真)
   ```

4. **字符转义序列**：

   - 可以通过转义序列使用 ASCII 码表示字符或字符串：
     - `'\0'`: 表示 NUL 字符 (ASCII码 0)。
     - `'\11'` 或 `'\x9'`: 表示 Tab 字符。
     - `"\x41"`: 表示字符串 "A" (ASCII码 65)。
   - 转义序列格式：
     - 八进制：`\` 后跟 1~3 位八进制数字。
     - 十六进制：`\x` 或 `\X` 后跟 1~2 位十六进制数字。

**示例代码**

以下代码展示了字符编码、字符运算及转义序列的应用：

```c
#include <stdio.h>

int main() {
    // 字符编码
    char ch = 'a';
    printf("Character: %c, ASCII: %d\n", ch, ch);  // 输出字符及其ASCII值

    // 字符运算
    printf("%c + 1 = %c\n", ch, ch + 1);           // 'a' + 1 -> 'b'

    // 字符的连续性
    printf("'0' + 9 == '9': %d\n", '0' + 9 == '9'); // 输出: 1 (真)

    // 转义序列
    printf("Tab character: '%c', ASCII: %d\n", '\11', '\11'); // 输出: Tab字符
    printf("Hexadecimal A: '%c'\n", '\x41');                 // 输出: A

    // 使用转义序列的字符串
    printf("String with Tab: \"%s\"\n", "\11Hello");          // 输出: 	Hello

    return 0;
}
```

运行结果如下：

```
Character: a, ASCII: 97
a + 1 = b
'0' + 9 == '9': 1
Tab character: '	', ASCII: 9
Hexadecimal A: 'A'
String with Tab: "	Hello"
```



